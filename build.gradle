apply plugin: 'java'
apply plugin: 'idea'
apply plugin: 'application'
apply plugin: 'org.junit.platform.gradle.plugin'

sourceCompatibility = 1.8

repositories {
    mavenCentral()
}

buildscript {
    repositories {
        mavenCentral()
    }
    dependencies {
        classpath 'org.junit.platform:junit-platform-gradle-plugin:1.0.1'
    }
}

project.ext {
    dropwizardVersion = '1.2.0'
    jUnitJupiterVersion = '5.0.1'
    jUnitPlatformLauncherVersion = '1.0.1'
    apiguardianVersion = '1.0.0'
    mockitoVersion = '2.12.0'
}

dependencies {
    compile("io.dropwizard:dropwizard-core:$dropwizardVersion")

    testCompile(
            "io.dropwizard:dropwizard-testing:$dropwizardVersion",
            "org.mockito:mockito-core:$mockitoVersion",
            //junit 5
            "org.junit.jupiter:junit-jupiter-api:$jUnitJupiterVersion",
            "org.junit.platform:junit-platform-launcher:$jUnitPlatformLauncherVersion",
            "org.apiguardian:apiguardian-api:$apiguardianVersion")

    testRuntime("org.junit.jupiter:junit-jupiter-engine:$jUnitJupiterVersion")
}

distributions {
    main {
        contents {
            from {
                ['README.md', 'verify-local-matching-service-example.yml']
            }
        }
    }
}

run {
    args = ["server", "verify-local-matching-service-example.yml"]
}

mainClassName = 'uk.gov.ida.verifylocalmatchingserviceexample.VerifyLocalMatchingServiceExampleApplication'